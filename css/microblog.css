/* microblog.css
   - Uses design tokens from css/themes.css
   - 8px spacing grid, accessible-first
   - Indentation: 2 spaces
*/

.microblog-page {
  --micro-max-width: 700px;
  --micro-gap: var(--space-5, 1.25rem);
  --micro-sidebar: 220px;
}

/* Hero */
.microblog-hero .subheadline {
  color: var(--text-muted, var(--color-text-secondary));
}

/* Type Dock (horizontal) */
.type-dock {
  position: sticky;
  top: 68px; /* sits just below sticky site header (header min-height ~68px) */
  z-index: 9;
  background: var(--bg, var(--color-background, #fff));
  border-bottom: 1px solid var(--surface-card-border, var(--color-border));
}
.type-dock .container {
  padding-top: var(--space-3, .75rem);
  padding-bottom: var(--space-3, .75rem);
  /* Center the dock; no search present */
  display: grid;
  place-items: center;
}
.type-dock-list {
  display: flex;
  align-items: center;
  justify-content: center; /* centered */
  gap: var(--space-2, .5rem);
  margin: 0;
  padding: 0;
  list-style: none;
}
.type-dock-list.center { justify-content: center; }

.type-dock-btn {
  display: inline-grid;
  place-items: center;
  width: 40px;
  height: 40px;
  padding: 0; /* icon-only */
  border-radius: 999px; /* round */
  border: 1px solid var(--color-border);
  background: var(--color-surface);
  color: var(--color-text-primary);
  font-size: 18px; /* icon size */
  cursor: pointer;
  transition: background-color var(--duration-fast, 150ms) var(--ease-out, ease), border-color var(--duration-fast, 150ms) var(--ease-out, ease), transform 60ms ease;
}
.type-dock-btn:focus-visible {
  outline: 3px solid var(--focus);
  outline-offset: 2px;
}
.type-dock-btn:hover { background: rgba(0,0,0,.04); }
:root[data-theme="midnightAurora"] .type-dock-btn:hover { background: rgba(255,255,255,.06); }
.type-dock-btn:active { transform: translateY(1px); }
/* remove any hidden text gap from previous label */
.type-dock-btn .label { display: none; }
.type-dock-btn.active {
  border-color: var(--color-primary);
  background: var(--color-primary);
  color: var(--color-text-inverse);
}

/* Layout */
.microblog-layout {
  display: grid;
  gap: var(--space-8, 2rem);
}

/* Place the search on the left extreme and remove any intrinsic max width constraints from parent scopes */
.type-dock .searchbox.right {
  grid-column: 1;       /* left column */
  justify-self: start;
  min-width: 0;
  max-width: 100%;
}
.type-dock .searchbox.right .search-input {
  width: clamp(220px, 40vw, 520px); /* grow but keep reasonable */
}
.filter-group .searchbar { justify-items: end; }
@media (max-width: 640px) {
  .filter-group .searchbar .searchbox.right { max-width: none; }
}

@media (min-width: 768px) {
  .microblog-layout {
    grid-template-columns: minmax(0, var(--micro-sidebar)) minmax(0, 1fr);
    align-items: start;
  }
}

.microblog-filters {
  position: sticky;
  top: 72px; /* below sticky header */
  display: grid;
  gap: var(--space-6, 1.5rem);
  align-self: start;
  background: transparent;
}

.filter-group {
  background: var(--surface-card, var(--color-surface));
  border: 1px solid var(--surface-card-border, var(--color-border));
  border-radius: var(--radius-xl, 0.75rem);
  padding: var(--space-5, 1.25rem);
  box-shadow: var(--shadow-sm);
}

.filter-title {
  margin: 0 0 var(--space-3, .75rem);
  font: 600 var(--text-md, 1.125rem)/var(--leading-snug, 1.25) var(--font-body, system-ui);
  color: var(--color-text-primary);
}

.filter-row {
  display: flex;
  flex-wrap: wrap;
  gap: var(--space-2, .5rem);
}

.filter-btn {
  font: 600 var(--text-sm, .875rem)/1 var(--font-body, system-ui);
  padding: .5rem .7rem;
  border-radius: var(--radius-lg, .5rem);
  color: var(--color-text-primary);
  background: var(--color-surface);
  border: 1px solid var(--color-border);
  cursor: pointer;
  transition: background-color var(--duration-fast, 150ms) var(--ease-out, ease);
}

.filter-btn:hover {
  background: rgba(0,0,0,.04);
}
:root[data-theme="midnightAurora"] .filter-btn:hover {
  background: rgba(255,255,255,.06);
}

.filter-btn.active,
.filter-btn[aria-pressed="true"] {
  border-color: var(--color-primary);
  color: var(--color-text-inverse);
  background: var(--color-primary);
}

/* Tag cloud (deprecated) */
/* .tag-cloud { } */

/* Search bar aesthetic (matches provided mock) */
.searchbar {
  display: grid;
  gap: var(--space-3, .75rem);
}
.searchbox {
  display: grid;
  grid-template-columns: 1fr auto;
  align-items: center;
  border: 1px solid var(--surface-card-border, var(--color-border));
  border-radius: 999px; /* robust rounded shape */
  background: var(--color-surface, var(--bg));
  padding: 10px 12px 10px 16px; /* slightly larger for 'robund' rounded feel */
  box-shadow: var(--shadow-sm);
}
.search-input {
  border: none;
  outline: none;
  background: transparent;
  font: 500 0.98rem/1.4 var(--font-sans, system-ui);
  color: var(--color-text-primary, inherit);
}
.search-input::placeholder {
  color: var(--text-muted, #6b7280);
}
.search-filter-btn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 40px;
  height: 40px;
  border: none;
  background: transparent;
  color: var(--color-text-primary);
  border-left: 1px solid var(--surface-card-border, var(--color-border));
  border-top-right-radius: 999px;
  border-bottom-right-radius: 999px;
  cursor: pointer;
}
.search-filter-btn:hover {
  background: rgba(0,0,0,.04);
}
:root[data-theme="midnightAurora"] .search-filter-btn:hover {
  background: rgba(255,255,255,.06);
}

/* Category chips were removed per latest request */
.search-categories { display: none; }
.chip {
  display: inline-flex;
  align-items: center;
  padding: .35rem .6rem;
  border-radius: 999px;
  border: 1px solid var(--color-border);
  background: var(--color-surface);
  color: var(--color-text-primary);
  font: 600 var(--text-xs, .75rem)/1 var(--font-sans, system-ui);
  cursor: pointer;
  transition: background-color var(--duration-fast, 150ms) var(--ease-out, ease), border-color var(--duration-fast, 150ms) var(--ease-out, ease);
}
.chip:hover { border-color: var(--color-primary); }
.chip.active,
.chip[aria-pressed="true"] {
  background: var(--color-primary);
  color: var(--color-text-inverse);
  border-color: var(--color-primary);
}

/* Feed */
.microblog-feed-wrapper {
  max-width: var(--micro-max-width);
}

.microblog-feed {
  display: grid;
  gap: var(--micro-gap);
}

/* Post card */
.micro-post {
  background: var(--card-bg, var(--color-surface));
  border: 1px solid var(--card-border, var(--color-border));
  border-radius: var(--radius-xl, .75rem);
  padding: var(--space-5, 1.25rem);
  box-shadow: var(--card-shadow, var(--shadow-base));
  transition: transform var(--duration-base, 300ms) var(--ease-out, ease);
}

.micro-post:hover {
  transform: translateY(-2px);
  box-shadow: var(--card-hover-shadow, var(--shadow-lg));
}

.micro-post-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: var(--space-3, .75rem);
  margin-bottom: var(--space-3, .75rem);
}

.micro-post-time {
  color: var(--text-muted, var(--color-text-secondary));
  font-size: var(--text-sm, .875rem);
}

.micro-post-type {
  color: var(--color-secondary);
  font-weight: 600;
  font-size: var(--text-sm, .875rem);
}

.micro-post-content p {
  margin: 0 0 var(--space-3, .75rem);
}

.micro-post-content pre {
  margin: var(--space-3, .75rem) 0;
  padding: var(--space-4, 1rem);
  background: var(--color-background);
  border: 1px solid var(--color-border);
  border-radius: var(--radius-md, .375rem);
  overflow-x: auto;
  font-family: var(--font-mono, ui-monospace);
  font-size: var(--text-sm, .875rem);
}

/* Media */
.micro-post-media {
  margin: var(--space-3, .75rem) 0;
}
.micro-post-media img,
.micro-post-media video {
  display: block;
  width: 100%;
  height: auto;
  border-radius: var(--radius-lg, .5rem);
}

/* Footer */
.micro-post-footer {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: var(--space-3, .75rem);
  margin-top: var(--space-4, 1rem);
}

.micro-post-tags {
  display: flex;
  flex-wrap: wrap;
  gap: .35rem .5rem;
}

.micro-post-tags .tag {
  font-size: var(--text-xs, .75rem);
  color: var(--color-text-secondary);
  background: var(--color-surface);
  border: 1px solid var(--color-border);
  padding: .2rem .45rem;
  border-radius: var(--radius-base, .25rem);
  cursor: pointer;
}
.micro-post-tags .tag:hover {
  border-color: var(--color-primary);
}

/* Loading sentinel */
.loading-sentinel {
  display: grid;
  place-items: center;
  padding: var(--space-4, 1rem);
}
.spinner {
  width: 22px; height: 22px;
  border-radius: 50%;
  border: 3px solid rgba(0,0,0,.15);
  border-top-color: var(--color-primary);
  animation: spin 1s linear infinite;
}
:root[data-theme="midnightAurora"] .spinner {
  border: 3px solid rgba(255,255,255,.15);
}

/* Toast */
.toast {
  position: fixed;
  left: 50%;
  bottom: 24px;
  transform: translateX(-50%) translateY(12px);
  background: var(--color-surface);
  color: var(--color-text-primary);
  border: 1px solid var(--color-border);
  border-radius: var(--radius-lg, .5rem);
  padding: .6rem .9rem;
  box-shadow: var(--shadow-lg);
  opacity: 0;
  transition: transform .25s var(--ease-out, ease), opacity .25s var(--ease-out, ease);
  z-index: 1000;
}
.toast.show {
  transform: translateX(-50%) translateY(0);
  opacity: 1;
}