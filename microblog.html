<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Microblog — Stream of Consciousness</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="Short-form thoughts, links, images, quotes, and code snippets. A quiet microblog stream.">
  <meta name="robots" content="index, follow">
  <meta name="color-scheme" content="light dark">
  <meta name="theme-color" content="#FFFBF5">
  <link rel="icon" href="/assets/icons/favicon.png" type="image/png">
  <script>
    // Pre-paint theme setter to avoid FOUC: enforce new themes with legacy mapping
    (function () {
      try {
        var d = document.documentElement;
        var key = 'theme-preference';
        var stored = null;
        try { stored = localStorage.getItem(key); } catch (_) {}

        // Canonical themes (v2)
        var NEW = { sunsetGlow: 1, midnightAurora: 1, forestMist: 1, cosmicDust: 1, oceanBreeze: 1 };

        // Legacy → New theme mapping
        var LEGACY_MAP = {
          // very old keys
          spice: 'sunsetGlow',
          holi: 'sunsetGlow',
          heritage: 'midnightAurora',
          dark: 'midnightAurora',
          light: 'sunsetGlow',
          // recent legacy keys
          saffronSunrise: 'sunsetGlow',
          indigoMidnight: 'midnightAurora',
          spiceOxide: 'sunsetGlow',
          rajasthanHoli: 'sunsetGlow',
          templeHeritage: 'midnightAurora'
        };

        if (!NEW[stored]) {
          // Try legacy key then system preference
          var legacy = null; try { legacy = localStorage.getItem('theme'); } catch(_) {}
          if (legacy && LEGACY_MAP[legacy]) {
            stored = LEGACY_MAP[legacy];
            try { localStorage.setItem(key, stored); localStorage.removeItem('theme'); } catch(_) {}
          } else if (LEGACY_MAP[stored]) {
            stored = LEGACY_MAP[stored];
            try { localStorage.setItem(key, stored); } catch(_) {}
          } else {
            var mql = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)');
            stored = (mql && mql.matches) ? 'midnightAurora' : 'sunsetGlow';
          }
        }

        d.setAttribute('data-theme', stored);
        d.classList.remove('dark'); // remove legacy class if present
      } catch (_) {}
    })();
  </script>
 
  <!-- Base styles -->
  <link rel="stylesheet" href="./css/styles.css">
  <link rel="stylesheet" href="./css/themes.css">
  <link rel="stylesheet" href="./css/utilities.css">
  <!-- Microblog styles -->
  <link rel="stylesheet" href="./css/microblog.css">
</head>
<body>
<!-- Fixed gradient mesh background layer -->
  <div class="gradient-mesh" aria-hidden="true" style="position: fixed; inset: 0; z-index: -1; opacity: 0.06;"></div>
  <a class="skip-link" href="#main">Skip to content</a>

  <header class="site-header glass">
    <div class="container header-inner">
      <div class="brand">
        <a href="/" class="brand-link" aria-label="Go to home">
          <img class="brand-logo" src="./assets/icons/favicon.png" alt="Nishit logo" width="28" height="28" decoding="async">
          <h1 class="brand-title">
            <span class="brand-fixed">Nishit</span>
          </h1>
        </a>
      </div>

      <nav class="site-nav" aria-label="Site navigation">
        <div class="site-actions" style="display:flex;align-items:center;gap:18px;">
          <div class="theme-switcher" aria-label="Theme switcher">
            <div role="group" aria-label="Select color theme" class="theme-switcher-group" style="display:flex;gap:14px;align-items:center;">
              <!-- ThemeProvider will render a toggle button here -->
            </div>
          </div>
          <!-- Streams icon/link -->
          <a href="/microblog.html" class="cv-link-header" aria-label="Open Streams (microblog)" title="Streams">
            <svg width="20" height="20" viewBox="0 0 24 24" aria-hidden="true" focusable="false">
              <use href="#pencil"></use>
            </svg>
          </a>
          <!-- CV as document icon -->
          <a href="/assets/Nishit_cv.pdf" class="cv-link-header" target="_blank" rel="noopener noreferrer" aria-label="Open CV PDF in a new tab" title="CV (PDF)">
            <svg width="20" height="20" viewBox="0 0 24 24" aria-hidden="true" focusable="false">
              <path fill="currentColor" d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8l-6-6zM13 9V3.5L18.5 9H13z"/>
            </svg>
          </a>
        </div>
      </nav>
    </div>
  </header>

  <main id="main" class="site-main microblog-page">
    <!-- Horizontal Type Dock: below header, above hero -->
    <nav class="type-dock" aria-label="Post type dock">
      <div class="container">
        <div class="dock-row" style="display:flex;align-items:center;gap:12px;width:100%;">
          <!-- centered icons -->
          <ul class="type-dock-list center" role="list" style="flex:1;display:flex;justify-content:center;gap:8px;margin:0;padding:0;list-style:none;">
            <li>
              <button class="type-dock-btn" data-filter="text" aria-label="Filter to Text" title="Text">
                <svg width="20" height="20" viewBox="0 0 24 24" aria-hidden="true" focusable="false"><use href="#pencil"></use></svg>
              </button>
            </li>
            <li>
              <button class="type-dock-btn" data-filter="link" aria-label="Filter to Links" title="Link">
                <svg width="20" height="20" viewBox="0 0 24 24" aria-hidden="true" focusable="false"><use href="#link"></use></svg>
              </button>
            </li>
            <li>
              <button class="type-dock-btn" data-filter="image" aria-label="Filter to Images" title="Image">
                <svg width="20" height="20" viewBox="0 0 24 24" aria-hidden="true" focusable="false"><use href="#image"></use></svg>
              </button>
            </li>
            <li>
              <button class="type-dock-btn" data-filter="quote" aria-label="Filter to Quotes" title="Quote">
                <svg width="20" height="20" viewBox="0 0 24 24" aria-hidden="true" focusable="false"><use href="#quote"></use></svg>
              </button>
            </li>
          </ul>
          <!-- search temporarily removed per request -->
        </div>
      </div>
    </nav>

    <section class="microblog-hero section gradient-overlay gradient-animate" aria-labelledby="microblog-hero-title">
      <div class="container narrow">
        <h2 id="microblog-hero-title">Streams</h2>
        <p class="subheadline">A quiet microblog: fragments, links, notes, and experiments. Chronological. Minimal ceremony.</p>
      </div>
    </section>

    <section class="microblog-content section" aria-labelledby="microblog-feed-title">
      <div class="container">
        <div class="microblog-layout">
          <aside class="microblog-filters" aria-label="Filter posts">
            <h2 class="visually-hidden">Filters</h2>

            <!-- Type section removed as per request -->

            <!-- Search moved up next to the dock (right side). Remove this card block entirely. -->

          </aside>

          <div class="microblog-feed-wrapper">
            <h2 id="microblog-feed-title" class="visually-hidden">Post feed</h2>
            <div id="microblog-feed" class="microblog-feed" role="feed" aria-busy="true" aria-live="polite">
              <!-- posts injected by JS -->
            </div>

            <div id="microblog-sentinel" class="loading-sentinel" aria-hidden="true">
              <div class="spinner" role="progressbar" aria-label="Loading more"></div>
            </div>

            <template id="micro-post-template">
              <article class="micro-post pantone-card" data-type="">
                <!-- Image/visual block -->
                <div class="pantone-card__image micro-post-media" aria-hidden="false"></div>

                <!-- Label block -->
                <div class="pantone-card__label">
                  <div class="pantone-card__code" aria-label="Color code"></div>
                  <h3 class="pantone-card__title"></h3>

                  <div class="pantone-card__meta">
                    <time class="micro-post-time" datetime=""></time>
                    <span class="micro-post-type"></span>
                  </div>

                  <div class="pantone-card__actions">
                    <button class="pantone-action-btn pantone-like" aria-label="Like post">
                      <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path>
                      </svg>
                    </button>
                    <button class="pantone-action-btn pantone-share" aria-label="Share post">
                      <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="18" cy="5" r="3"></circle>
                        <circle cx="6" cy="12" r="3"></circle>
                        <circle cx="18" cy="19" r="3"></circle>
                        <line x1="8.59" y1="13.51" x2="15.42" y2="17.49"></line>
                        <line x1="15.41" y1="6.51" x2="8.59" y2="10.49"></line>
                      </svg>
                    </button>
                  </div>
                </div>

                <!-- Full content remains for accessibility and future detail views -->
                <div class="micro-post-content visually-hidden"></div>
              </article>
            </template>
          </div>
        </div>
      </div>
    </section>
  </main>

  <footer class="site-footer">
    <div class="container footer-inner">
      <p>Contact: <a href="mailto:imayreply@vyakart.com" aria-label="Email: imayreply@vyakart.com">imayreply@vyakart.com</a></p>
    </div>
  </footer>

  <!-- Scripts -->
  <script src="./js/theme-provider.js" defer></script>
  <script src="./js/main.js" defer></script>
  <script src="./js/microblog.js" defer></script>
</body>
</html>